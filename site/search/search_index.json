{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introduction","text":"<p>Welcome to the Skypay API documentation hub! This resource is designed for developers and businesses looking to incorporate Skypay as a comprehensive payment solution within their online platforms. If you're aiming to streamline your payment process and provide multiple payment options to your users, you're in the right place.</p> <p>Skypay stands as a robust payment gateway aggregator, bringing together various payment services under one roof. Our goal is to simplify online transactions for businesses across Nepal, offering a unified API that caters to a diverse range of payment preferences.</p> <p>By integrating with the Skypay SDK/API, you unlock the potential to accept payments from:</p> <ul> <li>eSewa</li> <li>Khalti &amp; associated banks.</li> </ul> <p>Leverage the Skypay Payment Gateway to bypass the need for individual bank integrations, saving time and reducing complexity.</p>"},{"location":"#features","title":"Features","text":"<p>Our platform offers a plethora of features designed to enhance the payment experience for both merchants and customers:</p> <ul> <li>Multiple Payment Options: Offer your customers a variety of payment methods, enhancing convenience and accessibility.</li> <li>Seamless Integration: With our easy-to-integrate SDKs available for Web (JavaScript), Android, and iOS, setting up Skypay on your platform is straightforward.</li> <li>In-Platform Wallet Payments: Enable customers to make wallet payments without navigating away from your platform, keeping the user experience smooth and uninterrupted.</li> <li>Comprehensive Merchant Dashboard: Gain insights into transactions, filter and download reports, and much more, all from an intuitive dashboard.</li> </ul>"},{"location":"#support","title":"Support","text":"<p>Got questions? We're here to help. Feel free to reach out to us through the following channels:</p> <ul> <li>Mobile (Viber / Whatsapp): [+977 9845533797]</li> <li>Email: info@skypay.dev</li> </ul> <p>Dive into our documentation to explore detailed guides on integrating Skypay into your service. Together, let's make online payments easier and more accessible for everyone involved.</p>"},{"location":"setting-up/","title":"Setting up","text":""},{"location":"setting-up/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have the following:</p> <ul> <li>A Skypay merchant account.</li> <li>Your API key, available in your merchant dashboard.</li> </ul>"},{"location":"setting-up/#merchant-dashboard","title":"Merchant Dashboard","text":"<p>Skypay's Merchant dashboard &amp; API differ based on the environment you're working in:</p> <p>Live Environment Merchant Dashboard <code>https://app.skypay.dev</code></p> <p>UAT Environment (for testing purposes) Merchant Dashboard <code>https://app-uat.skypay.dev</code></p> <p>You can use merchant dashboard to generate access_key and setup the payment provider accounts like eSewa, Khalti, etc.</p>"},{"location":"setting-up/#api-key","title":"API Key","text":"<p>You can find your API key in the profile menu like below: </p>"},{"location":"setting-up/#set-up-the-payment-providers","title":"Set up the payment providers","text":"<p>You can setup the payment providers so your users can pay with these payment options like below: </p> <p>Please note of the integration methods like Manual, API and Assisted. This will be cover in brief in this video:</p>"},{"location":"web/","title":"Web Integration","text":""},{"location":"web/#how-skypay-makes-payments-easy","title":"How Skypay Makes Payments Easy:","text":"<ol> <li>Start Shopping: A customer picks out something nice on your website and decides to buy it. As they do, your system creates a special code called a <code>code</code> that will be reference for the payment for their order.</li> <li>Making the Payment: With their shopping cart full, the customer hits the checkout button. This sends their order details, including the <code>code</code>, the total cost, and a <code>return_url</code> (so they can easily get back to your site), over to Skypay.</li> <li>Payment Time: The customer is then taken to the Skypay payment page (<code>https://pay.skypay.com</code>), where they pay for their purchase throught various options, as setup on your merchant dashboard.</li> <li>Success and Back: After the payment is done, Skypay lets your site know everything went well by sending a message to the <code>return_url</code> you provided.</li> <li>Check It Twice: If you want, you can double-check to make sure the payment was received. This can be done using the payment-verify API</li> <li>All Done: Now that the payment is confirmed, you can wrap up the order. This might mean sending a product, providing a service, or giving the customer access to something special online.</li> <li>Happy Customer: The customer is happy with their smooth shopping experience, and you've successfully made a sale. Everyone wins.</li> </ol>"},{"location":"web/#generating-checkout-link","title":"Generating Checkout Link","text":""},{"location":"web/#environment","title":"Environment","text":"UAT (Testing)Live <pre><code>&lt;base-app-url&gt;  = https://app-uat.skypay.dev\n</code></pre> <pre><code>&lt;base-app-url&gt;  = https://app.skypay.dev\n</code></pre>"},{"location":"web/#method-1-using-direct-url","title":"Method 1: Using Direct URL","text":"<p>You can construct a direct URL to the Skypay checkout page by concatenating your parameters into a query string. This method is particularly useful for scenarios where you want to quickly redirect users to the payment process without a server-side action or when directly linking from an email, SMS, or within your application.</p>"},{"location":"web/#direct-url-structure","title":"Direct URL Structure","text":"<pre><code>&lt;base-app-url&gt;/checkout?api_key=&lt;API_KEY&gt;&amp;amount=&lt;AMOUNT&gt;&amp;success_url=&lt;SUCCESS_URL&gt;&amp;failure_url=&lt;FAILURE_URL&gt;&amp;code=&lt;UNIQUE_ORDER_ID&gt;\n</code></pre> <p>Simply replace <code>&lt;API_KEY&gt;</code>, <code>&lt;AMOUNT&gt;</code>, <code>&lt;SUCCESS_URL&gt;</code>, <code>&lt;UNIQUE_ORDER_ID&gt;</code> and <code>&lt;FAILURE_URL&gt;</code> with your actual data. This URL can then be used in hyperlinks or redirects to initiate the payment process directly.</p>"},{"location":"web/#example-usage-in-html","title":"Example Usage in HTML","text":"<pre><code>&lt;a href=\"&lt;base-app-url&gt;/checkout?api_key=453440321&amp;amount=100&amp;success_url=https://example.com/success&amp;failure_url=https://example.com/failure&amp;code=2093\" target=\"_blank\"&gt;Pay with Skypay&lt;/a&gt;\n</code></pre> <p>This creates an anchor tag that users can click to be directly taken to the Skypay checkout page with the specified parameters.</p>"},{"location":"web/#method-2-through-a-get-form","title":"Method 2: Through a GET Form","text":"<p>Alternatively, you can use an HTML form to submit these parameters via a GET request. This method provides a seamless user experience for websites, allowing for a more integrated look and feel.</p>"},{"location":"web/#html-form-structure","title":"HTML Form Structure","text":"<pre><code>&lt;form action=\"&lt;base-app-url&gt;/checkout\" method=\"GET\"&gt;\n  &lt;input type=\"hidden\" name=\"api_key\" value=\"453440321\"&gt;\n  &lt;input type=\"hidden\" name=\"amount\" value=\"500\"&gt;\n  &lt;input type=\"hidden\" name=\"code\" value=\"993838\"&gt;\n  &lt;input type=\"hidden\" name=\"success_url\" value=\"https://example.com/success\"&gt;\n  &lt;input type=\"hidden\" name=\"failure_url\" value=\"https://example.com/failure\"&gt;\n  &lt;input type=\"submit\" value=\"Pay with Skypay\"&gt;\n&lt;/form&gt;\n</code></pre> <p>In this form, the <code>action</code> attribute points to the Skypay checkout URL, and method <code>GET</code> is specified to append form data into the URL as query parameters. Users will click the \"Pay with Skypay\" button to initiate the payment process, leading them to the Skypay checkout page.</p>"},{"location":"web/#parameters","title":"Parameters","text":"Parameter Description api_key The unique api key for the merchant, available in your dashboard amount The transaction amount success_url URL where users are redirected upon success. failure_url URL where users are redirected upon failure. code Unique identifier for the order, usually order\u2019s id, this will be required later to verify"},{"location":"web/#handling-redirects-callbacks","title":"Handling Redirects &amp; Callbacks","text":""},{"location":"web/#success","title":"Success:","text":"<p>When a transaction is completed successfully, users are automatically redirected to the <code>success_url</code> specified in your payment form. Along with the redirection, an additional query parameter <code>?data=&lt;base_64_encoded_data&gt;</code> is appended to the URL. This parameter contains base64 encoded JSON data which, when decoded, can offer valuable information for tracking the transaction or updating order status on your system.</p>"},{"location":"web/#failure","title":"Failure:","text":"<p>Should a transaction not go through, users are redirected to the <code>failure_url</code> you've set up. To help diagnose or inform users of the issue, a query parameter is included in the format <code>?message=error_description</code>. This parameter provides a brief explanation or code indicating why the transaction failed, aiding in troubleshooting or customer support efforts.</p>"},{"location":"web/#additional-notes","title":"Additional Notes","text":"<ul> <li>Decoding the <code>data</code> Parameter: Upon successful transaction redirection, it's recommended to decode the base64 data server-side to maintain security. This decoded JSON can include transaction details such as <code>code</code>, amount, and transaction status.</li> <li>Handling Failure Messages: The <code>message</code> parameter on failure should be properly handled to display user-friendly messages or logs for internal tracking. Be cautious not to expose sensitive or technical details directly to users to avoid confusion or security concerns.</li> </ul>"},{"location":"web/#verify-payment","title":"Verify Payment","text":"<p>Skypay offers a robust API endpoint for merchants to verify the status of a payment transaction. This verification step is crucial for confirming that a payment has been successfully processed before finalizing the order on the merchant's side. Below is a detailed guide on how to use the Verify Payment API.</p>"},{"location":"web/#endpoint","title":"Endpoint","text":"<p>Method: <code>GET</code></p> UAT (Testing)Live <pre><code>https://api-uat.skypay.dev/api/v1/checkout/payments-verify/{code_or_order_id}\n</code></pre> <pre><code>`GET` https://api.skypay.dev/api/v1/checkout/payments-verify/{code_or_order_id}\n</code></pre> <p>Replace <code>{code_or_order_id}</code> with the payment code or your order ID provided at the time of transaction initiation.</p> <p>Additional Headers:</p> <pre><code>Key: &lt;API-KEY from Merchant Dashboard&gt;\n</code></pre> <p>Example Request</p> <pre><code>let config = {\nmethod: 'get',\nurl: 'https://api-uat.skypay.dev/api/v1/checkout/payments-verify/&lt;your_order_id&gt;',\nheaders: { \n    'Key': '&lt;your_api_key&gt;', \n}\n};\n</code></pre> <p>Replace  with your actual order ID and  with your Skypay API key."},{"location":"web/#successful-response","title":"Successful Response","text":"<p>A successful request to the Verify Payment API will return a JSON object containing details about the payment transaction. Below is an example of a successful response:</p> <pre><code>{\n    \"status\": true,\n    \"message\": \"Existing payment found\",\n    \"data\": {\n        \"id\": \"23dfbfb4-8476-41f0-95b2-38bf79affd2a\",\n        \"user_provider_id\": \"56bc5495-1b49-45f8-a37b-aef2ce104216\",\n        \"provider_id\": \"001\",\n        \"provider_name\": \"eSewa\",\n        \"provider_code\": \"esewa\",\n        \"provider_logo_url\": \"https://esewa.com.np/common/images/esewa_logo.png\",\n        \"code\": \"46895\",\n        \"mode\": \"API\",\n        \"created_at\": \"2024-04-01T11:44:05.000000Z\",\n        \"expires_at\": \"2024-04-01T17:33:18.000000Z\",\n        \"status\": \"complete\",\n        \"amount\": 100,\n        \"payment_data\": {\n            \"transaction_code\": \"0007680\",\n            \"status\": \"COMPLETE\",\n            \"total_amount\": \"100.0\",\n            \"transaction_uuid\": \"7811574\",\n            \"product_code\": \"EPAYTEST\",\n            \"signed_field_names\": \"transaction_code,status,total_amount,transaction_uuid,product_code,signed_field_names\",\n            \"signature\": \"VtscWlbCOHfkEE1aSdNckBf4nKyiwLa/Da15FtNu8/M=\"\n        }\n    }\n}\n</code></pre> <p>*Understanding the <code>status</code> and <code>payment_data</code> in the Verify Payment API Response</p>"},{"location":"web/#payment-status-status","title":"Payment Status (<code>status</code>):","text":"<p>The <code>status</code> field within the <code>data</code> node of the API response indicates the current status of the transaction. It's crucial for determining the outcome of a payment request. Here are the possible values for <code>status</code> and their meanings:</p> <ul> <li><code>complete</code>: The transaction was successful. You should proceed with fulfilling the order.</li> <li><code>pending</code>: The transaction is still in process. You may need to check again later.</li> <li><code>invalid</code>: The transaction request contained errors or was not processed due to invalid parameters. It is recommended to review the request and possibly prompt the user to retry.</li> <li><code>cancelled</code>: The transaction was cancelled by the user or due to timeout. You may need to prompt the user to initiate a new payment request if they wish to proceed with the purchase.</li> </ul> <p>For successful order processing and fulfillment, ensure that the <code>status</code> is <code>complete</code>. This verification is critical to confirm that the payment has been securely processed and received.</p>"},{"location":"web/#payment-provider-response-payment_data","title":"Payment Provider Response (<code>payment_data</code>):","text":"<p>The <code>payment_data</code> node contains detailed information from the payment provider regarding the transaction. Since Skypay integrates with multiple payment gateways, the structure and content of <code>payment_data</code> may vary depending on the provider. Please refer the respective documentation of the payment provider in case of any confusions.</p>"},{"location":"web/#error-handling","title":"Error Handling","text":"<p>In case of a failed transaction or if the payment cannot be found, the API will return a relevant error message and status. Ensure your application is equipped to handle such responses gracefully, informing the user or taking appropriate automated action.</p>"},{"location":"web/#notes","title":"Notes","text":"<ul> <li>It's critical to perform this verification step before proceeding with order fulfillment to ensure the integrity of the transaction.</li> <li>The <code>status</code> field within the <code>data</code> object indicates the payment status, which can be used to automate next steps in your order processing workflow.</li> </ul>"}]}